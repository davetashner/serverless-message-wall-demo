{"type":"epic","id":"EPIC-1","title":"Bootstrap Kubernetes actuator and Crossplane","intent":"Prepare a Kubernetes cluster that acts only as an infrastructure actuator using Crossplane controllers.","principles":["Kubernetes is actuator only","No application runtime in Kubernetes"],"status":"done"}
{"type":"issue","epic":"EPIC-1","id":"ISSUE-1.0","title":"Create AWS IAM resources for Crossplane","description":"Create the permission boundary policy and crossplane-actuator IAM user per ADR-006. This is a manual prerequisite before Crossplane can manage AWS resources.","acceptance":["MessageWallRoleBoundary policy exists in AWS","crossplane-actuator IAM user exists with scoped policy","User policy requires permission boundary on created roles","Access keys generated and stored securely"],"status":"done"}
{"type":"issue","epic":"EPIC-1","id":"ISSUE-1.1","title":"Create local actuator cluster","description":"Provision a local Kubernetes cluster (kind) for running Crossplane.","acceptance":["Cluster reachable via kubectl","Idempotent bootstrap script exists","Cluster named 'actuator'"],"status":"done"}
{"type":"issue","epic":"EPIC-1","id":"ISSUE-1.2","title":"Install Crossplane via Helm","description":"Install Crossplane into the actuator cluster using Helm per ADR-006.","acceptance":["Crossplane pods running in crossplane-system namespace","Installation is idempotent","Helm release named 'crossplane'"],"status":"done"}
{"type":"issue","epic":"EPIC-1","id":"ISSUE-1.3","title":"Install AWS Crossplane family providers","description":"Install AWS family providers (s3, dynamodb, lambda, cloudwatchevents, iam) and configure ProviderConfig with crossplane-actuator credentials per ADR-006.","acceptance":["All five AWS family providers healthy","ProviderConfig references Kubernetes Secret with crossplane-actuator credentials","Providers configured for us-east-1","Able to create test AWS resource with messagewall-* prefix"],"status":"done"}
{"type":"issue","epic":"EPIC-1","id":"ISSUE-1.4","title":"Install Kyverno","description":"Install Kyverno policy engine into the actuator cluster per ADR-007.","acceptance":["Kyverno pods running in kyverno namespace","Installation is idempotent","Kyverno admission webhooks registered"],"status":"done"}
{"type":"issue","epic":"EPIC-1","id":"ISSUE-1.5","title":"Create Kyverno mutation policy for AWS resource tags","description":"Create ClusterPolicy that automatically adds required tags (createdBy, managedBy, environment) to all AWS managed resources per ADR-007.","acceptance":["Policy applies to S3, DynamoDB, Lambda, CloudWatchEvents resources","Tags createdBy=crossplane, managedBy=messagewall-demo, environment=dev added automatically","Policy is mutating (adds tags if missing)"],"status":"done"}
{"type":"issue","epic":"EPIC-1","id":"ISSUE-1.6","title":"Create Kyverno validation policy for AWS resource tags","description":"Create ClusterPolicy that rejects AWS managed resources missing required tags per ADR-007.","acceptance":["Policy applies to S3, DynamoDB, Lambda, CloudWatchEvents resources","Resources without required tags are rejected","Policy runs in Enforce mode","Clear error message on rejection"],"status":"done"}

{"type":"epic","id":"EPIC-2","title":"Define core AWS infrastructure resources","intent":"Provision the AWS resources required to run the serverless application using Crossplane-managed resources.","status":"done"}
{"type":"issue","epic":"EPIC-2","id":"ISSUE-2.1","title":"Create S3 bucket for static site and state","description":"Provision an S3 bucket in us-east-1 for hosting static web assets, state.json, and Lambda artifacts.","acceptance":["Bucket named messagewall-* exists in us-east-1","S3 static website hosting enabled","Website endpoint accessible","Bucket policy allows public read for web content","Bucket supports artifacts/ prefix for Lambda ZIPs"],"status":"done"}
{"type":"issue","epic":"EPIC-2","id":"ISSUE-2.2","title":"Create DynamoDB table","description":"Provision DynamoDB table using single-table design per ADR-004.","acceptance":["Table named messagewall-* exists in us-east-1","Partition key: PK (String)","Sort key: SK (String)","Table accessible from Lambda","Supports METADATA and MESSAGE record types"],"status":"done"}
{"type":"issue","epic":"EPIC-2","id":"ISSUE-2.3","title":"Create IAM roles and policies for Lambda","description":"Define least-privilege IAM roles for Lambda functions. Roles must have MessageWallRoleBoundary attached per ADR-006.","acceptance":["Separate roles: messagewall-api-role and messagewall-snapshot-role","Both roles have MessageWallRoleBoundary permission boundary","api-handler role: DynamoDB read/write, EventBridge PutEvents, CloudWatch Logs","snapshot-writer role: DynamoDB read, S3 PutObject, CloudWatch Logs"],"status":"done"}

{"type":"epic","id":"EPIC-3","title":"Implement Lambda functions","intent":"Create minimal Lambda functions that implement the application behavior.","status":"done"}
{"type":"issue","epic":"EPIC-3","id":"ISSUE-3.1","title":"Implement api-handler Lambda","description":"Create Lambda that handles browser requests, updates DynamoDB, and emits EventBridge events.","acceptance":["POST increments messageCount in METADATA record","POST stores message with PK=MESSAGE, SK=timestamp#uuid","EventBridge event emitted to default bus","Logs visible in CloudWatch","Returns CORS headers"],"status":"done"}
{"type":"issue","epic":"EPIC-3","id":"ISSUE-3.2","title":"Implement snapshot-writer Lambda","description":"Create Lambda that generates state.json from DynamoDB and writes it to S3.","acceptance":["Reads messageCount from METADATA record","Queries last 5 messages ordered by SK descending","Writes valid JSON to s3://messagewall-*/state.json","Overwrites previous snapshot safely"],"status":"done"}
{"type":"issue","epic":"EPIC-3","id":"ISSUE-3.3","title":"Package Lambda artifacts","description":"Produce deterministic ZIP artifacts for both Lambdas.","acceptance":["Repeatable build scripts exist","Artifacts uploaded to s3://messagewall-*/artifacts/","api-handler.zip and snapshot-writer.zip produced","Crossplane manifests reference S3 artifact locations"],"status":"done"}

{"type":"epic","id":"EPIC-4","title":"Wire event-driven flow","intent":"Connect AWS services so changes propagate via events, not direct coupling.","status":"pending"}
{"type":"issue","epic":"EPIC-4","id":"ISSUE-4.1","title":"Expose api-handler via Lambda Function URL","description":"Create a Lambda Function URL to accept browser requests.","acceptance":["URL reachable from browser","CORS configured for S3 website origin","POST requests invoke Lambda","AUTH_TYPE set to NONE for public access"],"status":"pending"}
{"type":"issue","epic":"EPIC-4","id":"ISSUE-4.2","title":"Create EventBridge rule for snapshot updates","description":"Trigger snapshot-writer Lambda on api-handler events.","acceptance":["Rule named messagewall-* on default EventBridge bus","Rule matches events from api-handler","snapshot-writer invoked successfully on match"],"status":"pending"}

{"type":"epic","id":"EPIC-5","title":"Create browser-based UI","intent":"Provide a simple browser experience that makes the application easy to reason about.","status":"pending"}
{"type":"issue","epic":"EPIC-5","id":"ISSUE-5.1","title":"Create static HTML page","description":"Create index.html for displaying message count and messages.","acceptance":["Page loads from S3 website endpoint","UI shows message count","UI shows list of recent messages","UI has text input and Post button"],"status":"pending"}
{"type":"issue","epic":"EPIC-5","id":"ISSUE-5.2","title":"Implement browser-side JavaScript","description":"Fetch state.json and POST messages to Lambda Function URL.","acceptance":["Fetches state.json on page load","Renders message count and messages","POST sends message text to Lambda Function URL","UI updates on page refresh after posting"],"status":"pending"}

{"type":"epic","id":"EPIC-6","title":"Demo scripts and verification","intent":"Make the demo easy to deploy, verify, and clean up.","status":"pending"}
{"type":"issue","epic":"EPIC-6","id":"ISSUE-6.1","title":"Create deployment script","description":"Script that applies all Crossplane resources for a dev environment.","acceptance":["Single command deploys full stack","Script is idempotent","Waits for resources to be ready"],"status":"pending"}
{"type":"issue","epic":"EPIC-6","id":"ISSUE-6.2","title":"Create smoke test","description":"Script that posts a message and verifies DynamoDB and S3 state.","acceptance":["Script posts a test message via Lambda Function URL","Verifies state.json updated in S3","Verifies DynamoDB contains the message","Reports success or failure clearly"],"status":"pending"}
{"type":"issue","epic":"EPIC-6","id":"ISSUE-6.3","title":"Create cleanup script","description":"Script that tears down all managed resources.","acceptance":["Deletes Crossplane-managed AWS resources","Empties S3 bucket before deletion","Repeated runs succeed without error"],"status":"pending"}

{"type":"epic","id":"EPIC-7","title":"Prepare for platform extensions","intent":"Lay groundwork for future demos involving ConfigHub, bulk changes, and policy enforcement.","status":"pending"}
{"type":"issue","epic":"EPIC-7","id":"ISSUE-7.1","title":"Document bulk change scenarios","description":"Describe how Lambda memory/timeouts could be changed across environments.","acceptance":["README includes bulk-change walkthrough"],"status":"pending"}
{"type":"issue","epic":"EPIC-7","id":"ISSUE-7.2","title":"Document ConfigHub integration points","description":"Identify where ConfigHub could manage and mutate resolved configuration.","acceptance":["Clear narrative for ConfigHub + Crossplane demo","References ADR-005"],"status":"pending"}

{"type":"epic","id":"EPIC-8","title":"Integrate ConfigHub as configuration control plane","intent":"Establish ConfigHub as the authoritative store for fully-rendered Crossplane manifests. Flow: Git (authoring) -> Render CRDs (CI) -> ConfigHub (authoritative) -> Kubernetes actuator. See ADR-005.","principles":["ConfigHub is authoritative for resolved config","Git remains authoring surface","Crossplane remains actuator","No direct kubectl apply from CI for managed resources"],"status":"pending"}
{"type":"issue","epic":"EPIC-8","id":"ISSUE-8.1","title":"Define ConfigHub spaces and units for the demo","description":"Create ConfigHub spaces and initial units representing the serverless application infrastructure.","acceptance":["ConfigHub space exists for demo","Units correspond to Lambda, DynamoDB, S3, EventBridge resources","Units are environment-scoped (e.g., dev)"],"status":"pending"}
{"type":"issue","epic":"EPIC-8","id":"ISSUE-8.2","title":"Render and publish Crossplane manifests to ConfigHub","description":"Create CI pipeline step that renders fully-resolved Crossplane manifests and publishes to ConfigHub.","acceptance":["Rendered manifests have no placeholders or variables","Manifests published to ConfigHub via API","ConfigHub holds authoritative resolved config"],"status":"pending"}
{"type":"issue","epic":"EPIC-8","id":"ISSUE-8.3","title":"Attach policy checks to ConfigHub units","description":"Define and apply policy checks (OPA or ConfigHub functions) to enforce basic guardrails.","acceptance":["Policy blocks overly permissive IAM policies","Policy enforces minimum Lambda timeout/memory","Policy runs before actuation"],"status":"pending"}
{"type":"issue","epic":"EPIC-8","id":"ISSUE-8.4","title":"Clarify and implement ConfigHub actuation mechanism","description":"Determine how ConfigHub-approved manifests reach the Kubernetes actuator (ArgoCD push vs actuator pull) and implement the chosen approach.","acceptance":["Actuation mechanism documented","ConfigHub-approved config reaches actuator cluster","No direct kubectl apply from CI","Status is observable in both ConfigHub and Kubernetes"],"status":"pending"}
{"type":"issue","epic":"EPIC-8","id":"ISSUE-8.5","title":"Demonstrate bulk configuration change via ConfigHub","description":"Use a ConfigHub function to update configuration across multiple resources in one operation.","acceptance":["Single operation updates both Lambda functions","Change reflected in AWS","Change visible as a single ConfigHub revision"],"status":"pending"}
{"type":"issue","epic":"EPIC-8","id":"ISSUE-8.6","title":"Prevent CI from overwriting ConfigHub-managed changes","description":"Establish ownership and concurrency rules to avoid clobbering ConfigHub-side edits.","acceptance":["CI detects drift and fails safely","ConfigHub revisions are not overwritten by re-import","Ownership model documented"],"status":"pending"}
{"type":"issue","epic":"EPIC-8","id":"ISSUE-8.7","title":"Demonstrate break-glass recovery and reconciliation","description":"Show how a direct AWS-side change can be reconciled back into ConfigHub after recovery.","acceptance":["Emergency change captured","ConfigHub reconciles new state","Audit trail preserved"],"status":"pending"}
{"type":"issue","epic":"EPIC-8","id":"ISSUE-8.8","title":"Document ConfigHub + Crossplane demo narrative","description":"Create a clear walkthrough explaining how ConfigHub, Crossplane, and AWS interact in the demo.","acceptance":["README explains control flow per ADR-005","Demo highlights risk reduction and operability gains","Narrative is understandable without prior ConfigHub knowledge"],"status":"pending"}
