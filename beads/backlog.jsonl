{"type":"epic","id":"EPIC-1","title":"Bootstrap Kubernetes actuator and Crossplane","intent":"Prepare a Kubernetes cluster that acts only as an infrastructure actuator using Crossplane controllers.","principles":["Kubernetes is actuator only","No application runtime in Kubernetes"],"status":"done"}
{"type":"issue","epic":"EPIC-1","id":"ISSUE-1.0","title":"Create AWS IAM resources for Crossplane","description":"Create the permission boundary policy and crossplane-actuator IAM user per ADR-006. This is a manual prerequisite before Crossplane can manage AWS resources.","acceptance":["MessageWallRoleBoundary policy exists in AWS","crossplane-actuator IAM user exists with scoped policy","User policy requires permission boundary on created roles","Access keys generated and stored securely"],"status":"done"}
{"type":"issue","epic":"EPIC-1","id":"ISSUE-1.1","title":"Create local actuator cluster","description":"Provision a local Kubernetes cluster (kind) for running Crossplane.","acceptance":["Cluster reachable via kubectl","Idempotent bootstrap script exists","Cluster named 'actuator'"],"status":"done"}
{"type":"issue","epic":"EPIC-1","id":"ISSUE-1.2","title":"Install Crossplane via Helm","description":"Install Crossplane into the actuator cluster using Helm per ADR-006.","acceptance":["Crossplane pods running in crossplane-system namespace","Installation is idempotent","Helm release named 'crossplane'"],"status":"done"}
{"type":"issue","epic":"EPIC-1","id":"ISSUE-1.3","title":"Install AWS Crossplane family providers","description":"Install AWS family providers (s3, dynamodb, lambda, cloudwatchevents, iam) and configure ProviderConfig with crossplane-actuator credentials per ADR-006.","acceptance":["All five AWS family providers healthy","ProviderConfig references Kubernetes Secret with crossplane-actuator credentials","Providers configured for us-east-1","Able to create test AWS resource with messagewall-* prefix"],"status":"done"}
{"type":"issue","epic":"EPIC-1","id":"ISSUE-1.4","title":"Install Kyverno","description":"Install Kyverno policy engine into the actuator cluster per ADR-007.","acceptance":["Kyverno pods running in kyverno namespace","Installation is idempotent","Kyverno admission webhooks registered"],"status":"done"}
{"type":"issue","epic":"EPIC-1","id":"ISSUE-1.5","title":"Create Kyverno mutation policy for AWS resource tags","description":"Create ClusterPolicy that automatically adds required tags (createdBy, managedBy, environment) to all AWS managed resources per ADR-007.","acceptance":["Policy applies to S3, DynamoDB, Lambda, CloudWatchEvents resources","Tags createdBy=crossplane, managedBy=messagewall-demo, environment=dev added automatically","Policy is mutating (adds tags if missing)"],"status":"done"}
{"type":"issue","epic":"EPIC-1","id":"ISSUE-1.6","title":"Create Kyverno validation policy for AWS resource tags","description":"Create ClusterPolicy that rejects AWS managed resources missing required tags per ADR-007.","acceptance":["Policy applies to S3, DynamoDB, Lambda, CloudWatchEvents resources","Resources without required tags are rejected","Policy runs in Enforce mode","Clear error message on rejection"],"status":"done"}

{"type":"epic","id":"EPIC-2","title":"Define core AWS infrastructure resources","intent":"Provision the AWS resources required to run the serverless application using Crossplane-managed resources.","status":"done"}
{"type":"issue","epic":"EPIC-2","id":"ISSUE-2.1","title":"Create S3 bucket for static site and state","description":"Provision an S3 bucket in us-east-1 for hosting static web assets, state.json, and Lambda artifacts.","acceptance":["Bucket named messagewall-* exists in us-east-1","S3 static website hosting enabled","Website endpoint accessible","Bucket policy allows public read for web content","Bucket supports artifacts/ prefix for Lambda ZIPs"],"status":"done"}
{"type":"issue","epic":"EPIC-2","id":"ISSUE-2.2","title":"Create DynamoDB table","description":"Provision DynamoDB table using single-table design per ADR-004.","acceptance":["Table named messagewall-* exists in us-east-1","Partition key: PK (String)","Sort key: SK (String)","Table accessible from Lambda","Supports METADATA and MESSAGE record types"],"status":"done"}
{"type":"issue","epic":"EPIC-2","id":"ISSUE-2.3","title":"Create IAM roles and policies for Lambda","description":"Define least-privilege IAM roles for Lambda functions. Roles must have MessageWallRoleBoundary attached per ADR-006.","acceptance":["Separate roles: messagewall-api-role and messagewall-snapshot-role","Both roles have MessageWallRoleBoundary permission boundary","api-handler role: DynamoDB read/write, EventBridge PutEvents, CloudWatch Logs","snapshot-writer role: DynamoDB read, S3 PutObject, CloudWatch Logs"],"status":"done"}

{"type":"epic","id":"EPIC-3","title":"Implement Lambda functions","intent":"Create minimal Lambda functions that implement the application behavior.","status":"done"}
{"type":"issue","epic":"EPIC-3","id":"ISSUE-3.1","title":"Implement api-handler Lambda","description":"Create Lambda that handles browser requests, updates DynamoDB, and emits EventBridge events.","acceptance":["POST increments messageCount in METADATA record","POST stores message with PK=MESSAGE, SK=timestamp#uuid","EventBridge event emitted to default bus","Logs visible in CloudWatch","Returns CORS headers"],"status":"done"}
{"type":"issue","epic":"EPIC-3","id":"ISSUE-3.2","title":"Implement snapshot-writer Lambda","description":"Create Lambda that generates state.json from DynamoDB and writes it to S3.","acceptance":["Reads messageCount from METADATA record","Queries last 5 messages ordered by SK descending","Writes valid JSON to s3://messagewall-*/state.json","Overwrites previous snapshot safely"],"status":"done"}
{"type":"issue","epic":"EPIC-3","id":"ISSUE-3.3","title":"Package Lambda artifacts","description":"Produce deterministic ZIP artifacts for both Lambdas.","acceptance":["Repeatable build scripts exist","Artifacts uploaded to s3://messagewall-*/artifacts/","api-handler.zip and snapshot-writer.zip produced","Crossplane manifests reference S3 artifact locations"],"status":"done"}

{"type":"epic","id":"EPIC-4","title":"Wire event-driven flow","intent":"Connect AWS services so changes propagate via events, not direct coupling.","status":"done"}
{"type":"issue","epic":"EPIC-4","id":"ISSUE-4.1","title":"Expose api-handler via Lambda Function URL","description":"Create a Lambda Function URL to accept browser requests.","acceptance":["URL reachable from browser","CORS configured for S3 website origin","POST requests invoke Lambda","AUTH_TYPE set to NONE for public access"],"status":"done"}
{"type":"issue","epic":"EPIC-4","id":"ISSUE-4.2","title":"Create EventBridge rule for snapshot updates","description":"Trigger snapshot-writer Lambda on api-handler events.","acceptance":["Rule named messagewall-* on default EventBridge bus","Rule matches events from api-handler","snapshot-writer invoked successfully on match"],"status":"done"}

{"type":"epic","id":"EPIC-5","title":"Create browser-based UI","intent":"Provide a simple browser experience that makes the application easy to reason about.","status":"done"}
{"type":"issue","epic":"EPIC-5","id":"ISSUE-5.1","title":"Create static HTML page","description":"Create index.html for displaying message count and messages.","acceptance":["Page loads from S3 website endpoint","UI shows message count","UI shows list of recent messages","UI has text input and Post button"],"status":"done"}
{"type":"issue","epic":"EPIC-5","id":"ISSUE-5.2","title":"Implement browser-side JavaScript","description":"Fetch state.json and POST messages to Lambda Function URL.","acceptance":["Fetches state.json on page load","Renders message count and messages","POST sends message text to Lambda Function URL","UI updates on page refresh after posting"],"status":"done"}

{"type":"epic","id":"EPIC-6","title":"Demo scripts and verification","intent":"Make the demo easy to deploy, verify, and clean up.","status":"done"}
{"type":"issue","epic":"EPIC-6","id":"ISSUE-6.1","title":"Create deployment script","description":"Script that applies all Crossplane resources for a dev environment.","acceptance":["Single command deploys full stack","Script is idempotent","Waits for resources to be ready"],"status":"done"}
{"type":"issue","epic":"EPIC-6","id":"ISSUE-6.2","title":"Create smoke test","description":"Script that posts a message and verifies DynamoDB and S3 state.","acceptance":["Script posts a test message via Lambda Function URL","Verifies state.json updated in S3","Verifies DynamoDB contains the message","Reports success or failure clearly"],"status":"done"}
{"type":"issue","epic":"EPIC-6","id":"ISSUE-6.3","title":"Create cleanup script","description":"Script that tears down all managed resources.","acceptance":["Deletes Crossplane-managed AWS resources","Empties S3 bucket before deletion","Repeated runs succeed without error"],"status":"done"}

{"type":"epic","id":"EPIC-7","title":"Prepare for platform extensions","intent":"Lay groundwork for future demos involving ConfigHub, bulk changes, and policy enforcement.","status":"done"}
{"type":"issue","epic":"EPIC-7","id":"ISSUE-7.1","title":"Document bulk change scenarios","description":"Describe how Lambda memory/timeouts could be changed across environments.","acceptance":["README includes bulk-change walkthrough"],"status":"done"}
{"type":"issue","epic":"EPIC-7","id":"ISSUE-7.2","title":"Document ConfigHub integration points","description":"Identify where ConfigHub could manage and mutate resolved configuration.","acceptance":["Clear narrative for ConfigHub + Crossplane demo","References ADR-005"],"status":"done"}

{"type":"epic","id":"EPIC-8","title":"Integrate ConfigHub as configuration control plane","intent":"Establish ConfigHub as the authoritative store for fully-rendered Crossplane manifests. Flow: Git (authoring) -> Render CRDs (CI) -> ConfigHub (authoritative) -> Kubernetes actuator. See ADR-005.","principles":["ConfigHub is authoritative for resolved config","Git remains authoring surface","Crossplane remains actuator","No direct kubectl apply from CI for managed resources"],"status":"done"}
{"type":"issue","epic":"EPIC-8","id":"ISSUE-8.1","title":"Define ConfigHub spaces and units for the demo","description":"Create ConfigHub spaces and initial units representing the serverless application infrastructure.","acceptance":["ConfigHub space exists for demo","Units correspond to Lambda, DynamoDB, S3, EventBridge resources","Units are environment-scoped (e.g., dev)"],"status":"done"}
{"type":"issue","epic":"EPIC-8","id":"ISSUE-8.2","title":"Render and publish Crossplane manifests to ConfigHub","description":"Create CI pipeline step that renders fully-resolved Crossplane manifests and publishes to ConfigHub.","acceptance":["Rendered manifests have no placeholders or variables","Manifests published to ConfigHub via API","ConfigHub holds authoritative resolved config"],"status":"done"}
{"type":"issue","epic":"EPIC-8","id":"ISSUE-8.3","title":"Attach policy checks to ConfigHub units","description":"Define and apply policy checks (OPA or ConfigHub functions) to enforce basic guardrails.","acceptance":["Policy blocks overly permissive IAM policies","Policy enforces minimum Lambda timeout/memory","Policy runs before actuation"],"status":"done"}
{"type":"issue","epic":"EPIC-8","id":"ISSUE-8.4","title":"Clarify and implement ConfigHub actuation mechanism","description":"Determine how ConfigHub-approved manifests reach the Kubernetes actuator (ArgoCD push vs actuator pull) and implement the chosen approach.","acceptance":["Actuation mechanism documented","ConfigHub-approved config reaches actuator cluster","No direct kubectl apply from CI","Status is observable in both ConfigHub and Kubernetes"],"status":"done"}
{"type":"issue","epic":"EPIC-8","id":"ISSUE-8.5","title":"Demonstrate bulk configuration change via ConfigHub","description":"Use a ConfigHub function to update configuration across multiple resources in one operation.","acceptance":["Single operation updates both Lambda functions","Change reflected in AWS","Change visible as a single ConfigHub revision"],"status":"done"}
{"type":"issue","epic":"EPIC-8","id":"ISSUE-8.6","title":"Demonstrate controlled rollout of ConfigHub revisions","description":"Show how revisions from multiple sources (CI, bulk changes, break-glass) accumulate in ConfigHub, and how deployment to the actuator is controlled separately from revision creation. ConfigHub distinguishes HeadRevisionNum (latest) from LiveRevisionNum (deployed). The key insight: 'cub unit update' creates revisions, 'cub unit apply' deploys them - these are separate operations. Implementation: (1) Verify if current CI/worker auto-applies revisions, (2) If so, add an approval gate so revisions require explicit promotion, (3) Create demo showing operator choosing which revision to deploy.","acceptance":["Verify whether CI or worker currently auto-applies revisions to actuator","If auto-apply exists, add approval gate requiring explicit 'cub unit apply'","Demo shows HeadRevisionNum diverging from LiveRevisionNum after CI push","Operator can review pending revisions and choose which to deploy","Demo script (e.g., scripts/demo-revision-rollout.sh) walks through controlled promotion"],"status":"done"}
{"type":"issue","epic":"EPIC-8","id":"ISSUE-8.7","title":"Demonstrate break-glass recovery and reconciliation","description":"Show how a direct AWS-side change can be reconciled back into ConfigHub after recovery.","acceptance":["Emergency change captured","ConfigHub reconciles new state","Audit trail preserved"],"status":"done"}
{"type":"issue","epic":"EPIC-8","id":"ISSUE-8.8","title":"Document ConfigHub + Crossplane demo narrative","description":"Create a clear walkthrough explaining how ConfigHub, Crossplane, and AWS interact in the demo.","acceptance":["README explains control flow per ADR-005","Demo highlights risk reduction and operability gains","Narrative is understandable without prior ConfigHub knowledge"],"status":"done"}

{"type":"epic","id":"EPIC-9","title":"Setup wizard for new users","intent":"Enable new users to configure and deploy the demo with their own AWS account through an interactive setup wizard. The wizard handles all environment-specific values (AWS account ID, S3 bucket name, region) and guides users through the full deployment process.","principles":["Works reliably across different machines","Fails fast with clear error messages","Supports both interactive and scripted usage","POSIX sh for maximum portability"],"status":"done"}
{"type":"issue","epic":"EPIC-9","id":"ISSUE-9.1","title":"Write ADR-008 for setup wizard design","description":"Document the design decisions for the setup wizard including interaction modes, validation strategy, template approach, and two-phase deployment for Function URL.","acceptance":["ADR-008 exists in docs/decisions/","Documents interactive vs non-interactive modes","Documents placeholder syntax (__PLACEHOLDER__)","Documents two-phase deployment for Function URL","Documents POSIX sh choice for portability"],"status":"done"}
{"type":"issue","epic":"EPIC-9","id":"ISSUE-9.2","title":"Convert hardcoded values to placeholders","description":"Replace all environment-specific hardcoded values with placeholder syntax. Affected files: IAM policies, Crossplane manifests, deploy scripts, Lambda defaults, index.html.","acceptance":["All AWS account IDs replaced with __AWS_ACCOUNT_ID__","All bucket/table names replaced with __RESOURCE_PREFIX__","All regions replaced with __AWS_REGION__","Function URL in index.html replaced with __FUNCTION_URL__","Placeholder syntax is consistent across all files","List of all placeholder locations documented"],"status":"done"}
{"type":"issue","epic":"EPIC-9","id":"ISSUE-9.3","title":"Create setup wizard with interactive mode","description":"Create scripts/setup.sh that prompts users for required values: AWS account ID, resource prefix (for S3/DynamoDB naming), and AWS region.","acceptance":["Wizard prompts for each required value","Clear descriptions explain what each value is for","Prompts show example/default values","User can accept defaults by pressing Enter","Wizard summarizes inputs before applying"],"status":"done"}
{"type":"issue","epic":"EPIC-9","id":"ISSUE-9.4","title":"Add non-interactive mode with CLI flags","description":"Support --non-interactive mode with explicit flags: --account-id, --resource-prefix, --region. All values required in non-interactive mode.","acceptance":["--non-interactive flag disables prompts","--account-id=VALUE sets AWS account ID","--resource-prefix=VALUE sets S3/DynamoDB prefix","--region=VALUE sets AWS region","Missing required values in non-interactive mode cause clear error","--help shows all available flags"],"status":"done"}
{"type":"issue","epic":"EPIC-9","id":"ISSUE-9.5","title":"Implement input validation","description":"Validate user inputs before patching files. Check format only (no AWS API calls).","acceptance":["AWS account ID must be exactly 12 digits","Resource prefix must be valid for S3 bucket names (lowercase, no underscores, 3-37 chars)","Region must match AWS region format (e.g., us-east-1)","Invalid inputs show clear error message with expected format","Validation errors do not modify any files"],"status":"done"}
{"type":"issue","epic":"EPIC-9","id":"ISSUE-9.6","title":"Implement re-run detection and warning","description":"Detect if the wizard has already been run (placeholders already replaced) and warn the user before overwriting.","acceptance":["Wizard detects if files contain placeholders or real values","If already configured, warns user and shows current values","User must confirm to overwrite (--force flag in non-interactive)","Provides option to abort without changes"],"status":"done"}
{"type":"issue","epic":"EPIC-9","id":"ISSUE-9.7","title":"Add dry-run mode","description":"Support --dry-run flag that shows what would change without modifying files.","acceptance":["--dry-run flag prevents all file modifications","Shows diff-style output for each file that would change","Shows summary of total files affected","Exit code 0 if dry-run succeeds"],"status":"done"}
{"type":"issue","epic":"EPIC-9","id":"ISSUE-9.8","title":"Create AWS validation command","description":"Create scripts/validate-aws.sh that checks AWS credentials, permissions, and resource availability.","acceptance":["Checks AWS CLI is installed and configured","Checks caller identity matches provided account ID","Checks S3 bucket name is available (not taken)","Checks IAM permissions for creating required resources","Reports clear pass/fail for each check","Suggests fixes for common failures"],"status":"done"}
{"type":"issue","epic":"EPIC-9","id":"ISSUE-9.9","title":"Handle Function URL finalization","description":"After infrastructure deployment, the Function URL is generated by AWS. Create a finalize step that retrieves the URL and updates index.html.","acceptance":["scripts/finalize-setup.sh retrieves Function URL from kubectl","Updates index.html with actual Function URL","Re-uploads index.html to S3","Works after deploy-dev.sh completes","Clear error if Function URL not yet available"],"status":"done"}
{"type":"issue","epic":"EPIC-9","id":"ISSUE-9.10","title":"Integrate with bootstrap scripts","description":"After configuration, offer to run the full bootstrap and deployment sequence.","acceptance":["Wizard offers to run bootstrap after configuration","User can skip and run manually later","If user accepts, runs: bootstrap-kind.sh, bootstrap-crossplane.sh, bootstrap-aws-providers.sh, bootstrap-kyverno.sh","Each phase shows progress and waits for completion","On failure, stops and shows which phase failed"],"status":"done"}
{"type":"issue","epic":"EPIC-9","id":"ISSUE-9.11","title":"Create test suite for wizard","description":"Write tests for the setup wizard covering validation, placeholder replacement, and error handling.","acceptance":["Tests for input validation functions","Tests for placeholder replacement logic","Tests for re-run detection","Tests for dry-run mode","Tests run in CI without AWS credentials","Test framework documented in CONTRIBUTING.md or test README"],"status":"done"}
{"type":"issue","epic":"EPIC-9","id":"ISSUE-9.12","title":"Write integration test for full setup flow","description":"Create an end-to-end test that runs the wizard in non-interactive mode and verifies all placeholders are replaced correctly.","acceptance":["Test runs wizard with known inputs","Verifies all placeholders replaced in all files","Verifies no placeholders remain","Can run without AWS credentials (file changes only)","Documents how to run integration tests"],"status":"done"}
{"type":"issue","epic":"EPIC-9","id":"ISSUE-9.13","title":"Update getting started documentation","description":"Rewrite docs/setup-actuator-cluster.md and README.md to use the setup wizard as the primary onboarding path.","acceptance":["README quick start uses setup wizard","docs/setup-actuator-cluster.md updated with wizard instructions","Manual setup steps still documented as alternative","Troubleshooting section for common wizard issues","Screenshots or terminal output examples included"],"status":"done"}
{"type":"issue","epic":"EPIC-9","id":"ISSUE-9.14","title":"Add prerequisite checker","description":"Check that required tools are installed before running the wizard: aws cli, kubectl, kind, helm, docker.","acceptance":["Checks each required tool is installed","Shows version of each tool found","Suggests installation commands for missing tools (brew, apt, etc.)","Can be run standalone: scripts/check-prerequisites.sh","Wizard runs this automatically at start"],"status":"done"}

{"type":"epic","id":"EPIC-10","title":"Stabilize mental model and plane separation","intent":"Establish and document a clear separation between intent, authority, actuation, and runtime so subsequent work does not mix concerns or introduce accidental complexity.","principles":["Explicit planes","Single responsibility per artifact","Documentation as a forcing function"],"status":"done"}
{"type":"issue","epic":"EPIC-10","id":"ISSUE-10.1","title":"Document the four-plane model for the platform","description":"Write a concise document defining the Intent, Authority, Actuation, and Runtime planes and mapping existing artifacts in the repo to each plane.","acceptance":["Document exists under docs/planes.md","Each plane has a one-paragraph definition","Every major repo artifact is assigned to exactly one plane"],"status":"done"}
{"type":"issue","epic":"EPIC-10","id":"ISSUE-10.2","title":"Define platform invariants and non-goals","description":"Explicitly document invariants (e.g., Kubernetes is actuator-only, no app runtime in cluster) and non-goals to guide future design decisions.","acceptance":["Invariants documented under docs/invariants.md","Non-goals documented and time-boxed","Invariants referenced by later epics"],"status":"done"}

{"type":"epic","id":"EPIC-11","title":"Introduce a single platform product via Crossplane XRD","intent":"Collapse the existing infrastructure into a single developer-facing product boundary using a Crossplane Composite Resource.","principles":["One product, one claim","Hide AWS wiring","Small stable v1 schema"],"status":"done"}
{"type":"issue","epic":"EPIC-11","id":"ISSUE-11.1","title":"Design minimal v1 schema for ServerlessEventApp XRD","description":"Define a minimal Crossplane XRD schema that captures the message-wall application shape without exposing AWS or IAM primitives. Schema should be only as complex as needed to fully produce the message wall demo infrastructure, while maintaining the ability to reuse the serverless event-driven application pattern for similar apps. Avoid over-abstraction.","acceptance":["XRD schema defined with <=10 fields for the demo use case","Fields represent intent (not infrastructure)","Defaults provided for non-essential fields","Schema is extensible for future event-driven apps without breaking changes","No AWS-specific concepts exposed to developers"]}
{"type":"issue","epic":"EPIC-11","id":"ISSUE-11.2","title":"Implement Composition for ServerlessEventApp","description":"Create a Crossplane Composition that expands the XRD into all required AWS managed resources for the message wall.","acceptance":["Composition renders S3, DynamoDB, IAM, Lambda, and EventBridge","Single Claim produces a working application","Resources reach Ready state without manual intervention"]}
{"type":"issue","epic":"EPIC-11","id":"ISSUE-11.3","title":"Replace raw managed resources with a single Claim","description":"Refactor the deployment so environments are created by applying a single Claim rather than multiple managed resources.","acceptance":["dev environment deploys from one Claim","No direct application of managed AWS resources remains","Existing functionality preserved"]}
{"type":"issue","epic":"EPIC-11","id":"ISSUE-11.4","title":"Define XRD status fields and connection details","description":"Configure the XRD to expose key outputs as status fields so developers and automation can discover endpoints and observe readiness. The Function URL is generated by AWS after Lambda creation and must be surfaced.","acceptance":["websiteEndpoint exposed as status field","apiEndpoint (Function URL) exposed as status field","Aggregate Ready condition reflects all child resources","Meaningful error messages propagated from failed child resources","Status fields are queryable via kubectl and usable by ConfigHub"]}
{"type":"issue","epic":"EPIC-11","id":"ISSUE-11.5","title":"Create test suite for ServerlessEventApp Composition","description":"Validate that the Composition correctly expands Claims into working infrastructure.","acceptance":["Unit test: Composition renders expected managed resources from a sample Claim","Integration test: Applied Claim reaches Ready state in actuator cluster","Smoke test: Post a message via apiEndpoint, verify it appears in state.json via websiteEndpoint","Tests documented and runnable via scripts/test-xrd.sh or similar"]}
{"type":"issue","epic":"EPIC-11","id":"ISSUE-11.6","title":"Document ServerlessEventApp schema for developers","description":"Provide clear documentation so developers understand what fields are available, what values are valid, and how to troubleshoot.","acceptance":["Field descriptions with valid values and defaults documented","Example Claims for dev and prod environments","Troubleshooting guide for common status conditions (not ready, sync failed, etc.)","Documentation lives in docs/ or alongside XRD definition"],"status":"done"}
{"type":"issue","epic":"EPIC-11","id":"ISSUE-11.7","title":"Decide what ConfigHub stores (Claim vs expanded resources)","description":"Clarify whether ConfigHub holds the developer-authored Claim or the fully-expanded managed resources. This decision affects authority boundaries, diff visibility, and bulk change mechanics.","acceptance":["Decision documented with rationale in ADR or design doc","Trade-offs of each approach enumerated","Decision aligns with EPIC-13 configuration authority goals","ADR-005 updated if needed to reflect decision"],"status":"done"}

{"type":"epic","id":"EPIC-12","title":"Establish schema-first developer authoring experience","intent":"Merged into EPIC-16. Original intent: Decide and validate what developers author directly, ensuring they never need to reason about AWS wiring or Crossplane internals.","principles":["Developers author intent only","Schema constrains possibility space","Fast feedback on invalid inputs"],"status":"done","note":"Merged into EPIC-16"}

{"type":"epic","id":"EPIC-13","title":"Introduce configuration authority via ConfigHub","intent":"Make configuration authoritative outside of Git and prevent accidental overwrites or clobbering during iteration and bulk change.","principles":["Single source of truth","Bulk change safety","Explicit ownership"]}
{"type":"issue","epic":"EPIC-13","id":"ISSUE-13.1","title":"Model ServerlessEventApp config as ConfigHub units","description":"Represent the developer-facing config (Claim or higher-level spec) as a ConfigHub unit with versioning and history.","acceptance":["ConfigHub unit created for the app","Unit represents full desired configuration","ConfigHub history reflects changes over time"],"status":"done","note":"Completed as part of EPIC-8 and EPIC-11. ConfigHub stores ServerlessEventAppClaims per ADR-010."}
{"type":"issue","epic":"EPIC-13","id":"ISSUE-13.2","title":"Wire ConfigHub apply flow to Crossplane actuator","description":"Create a delivery path where approved ConfigHub config is rendered and applied to the actuator cluster.","acceptance":["ConfigHub-driven change results in updated AWS resources","No direct kubectl apply from CI","Apply status is observable"],"status":"done","note":"Completed as part of EPIC-8. ArgoCD CMP plugin syncs from ConfigHub per ADR-009."}
{"type":"issue","epic":"EPIC-13","id":"ISSUE-13.3","title":"Implement bidirectional sync between Git and ConfigHub","description":"Per ADR-011, implement the three-way sync model where ConfigHub is authoritative and changes flow bidirectionally. Phase 1: ConfigHub → Git sync (visibility). Phase 2: Git → ConfigHub as proposal (conflict prevention). Phase 3: Live → ConfigHub capture (break-glass safety). Start with Phase 1 as it provides immediate value and unblocks the mental model.","acceptance":["ConfigHub changes trigger sync back to Git (Phase 1)","CI cannot silently overwrite ConfigHub changes (Phase 2)","Break-glass changes are captured, not lost (Phase 3)","Conflict resolution process documented"]}
{"type":"issue","epic":"EPIC-13","id":"ISSUE-13.4","title":"Create Mermaid architecture diagram for ConfigHub-to-AWS flow","description":"Create a clear Mermaid diagram showing the complete flow from developer authoring through ConfigHub authority to AWS resource actuation. Diagram should show Git, CI, ConfigHub, ArgoCD, Kubernetes, Crossplane, and AWS components with their relationships.","acceptance":["Mermaid diagram exists in docs/","Diagram shows all components: Git, CI, ConfigHub, ArgoCD, Kubernetes, Crossplane, AWS","Flow direction and relationships are clear","Diagram renders correctly in GitHub markdown","Referenced from relevant ADRs or architecture docs"],"status":"done"}
{"type":"issue","epic":"EPIC-13","id":"ISSUE-13.5","title":"Write ADR-011: Bidirectional GitOps with ConfigHub as Authority","description":"ConfigHub is the authoritative source for configuration, but CI currently publishes rendered Claims from Git. This creates a conflict: bulk changes made in ConfigHub can be overwritten by subsequent CI runs. Write an ADR exploring approaches to resolve this while preserving ConfigHub as the authority.","acceptance":["ADR-011 exists in docs/decisions/","Problem statement clearly describes the CI vs ConfigHub conflict","At least 3 approaches evaluated with trade-offs","Decision preserves ConfigHub as authoritative source","Decision addresses how Git/CI role changes (if at all)","Implementation path is clear enough to unblock ISSUE-13.3"],"status":"done","note":"ADR-011 written. Reframed as bidirectional GitOps with three-way sync model. Open questions remain for implementation details."}

{"type":"epic","id":"EPIC-14","title":"Add minimal policy guardrails","intent":"Introduce a small set of high-value policies that prevent dangerous configurations before actuation. Policies run at multiple enforcement points: ConfigHub (authority layer), Kyverno (actuator cluster), and optionally CI/pre-commit for fast feedback.","principles":["Fail fast","Few policies, high leverage","Policy before deployment","Defense in depth (multiple enforcement points)"],"status":"done"}
{"type":"issue","epic":"EPIC-14","id":"ISSUE-14.0","title":"Document policy enforcement architecture (OPA at multiple layers)","description":"Document that OPA policies run at multiple enforcement points: (1) ConfigHub (authority layer, before apply), (2) Kyverno in actuator cluster (runtime layer, admission control), (3) optionally CI/pre-commit for early feedback. Update existing docs (ADR-005, planes.md, architecture-flow.md) to reflect this defense-in-depth approach.","acceptance":["Policy enforcement points documented in architecture docs","ADR-005 updated to mention multi-layer enforcement","planes.md updated to show policy as cross-cutting concern","Clear explanation of why policies run in multiple places (defense in depth, fail fast)"],"status":"done"}
{"type":"issue","epic":"EPIC-14","id":"ISSUE-14.1","title":"Add policy to block wildcard IAM permissions","description":"Implement a policy that prevents wildcard actions or resources in IAM permissions derived from the platform schema.","acceptance":["Policy fails on wildcard permissions","Clear human-readable error message","Passing example documented"],"status":"done","note":"Implemented in platform/kyverno/policies/validate-iam-no-wildcards.yaml"}
{"type":"issue","epic":"EPIC-14","id":"ISSUE-14.2","title":"Add bounds on Lambda memory and timeout","description":"Enforce reasonable upper and lower bounds on Lambda memory and timeout settings.","acceptance":["Out-of-bounds values are rejected","Bounds are configurable by platform team","Policy evaluated before apply"],"status":"done","note":"Implemented in platform/kyverno/policies/validate-claim-prod-requirements.yaml with env-specific bounds"}
{"type":"issue","epic":"EPIC-14","id":"ISSUE-14.3","title":"Duplicate required tags policy in ConfigHub","description":"The Kyverno tag mutation/validation policies (ISSUE-1.5, 1.6) enforce tags at the actuator layer. Duplicate this policy in ConfigHub so tags are validated before actuation, demonstrating defense-in-depth.","acceptance":["ConfigHub policy requires createdBy, managedBy, environment tags","Policy runs before apply in ConfigHub","Violations surface in ConfigHub UI/API with clear message","Documents why same policy exists in both ConfigHub and Kyverno"],"status":"done","note":"Implemented in platform/confighub/policies/require-tags.rego with README explaining defense-in-depth"}
{"type":"issue","epic":"EPIC-14","id":"ISSUE-14.4","title":"Add encryption at rest policy","description":"Require encryption at rest for stateful resources (S3, DynamoDB) in production environments.","acceptance":["Policy requires S3 bucket encryption for prod Claims","Policy requires DynamoDB encryption for prod Claims","Dev environments may have relaxed requirements","Clear error message on violation"],"status":"done","note":"Implemented in platform/kyverno/policies/validate-encryption-at-rest.yaml"}
{"type":"issue","epic":"EPIC-14","id":"ISSUE-14.5","title":"Add environment-specific policy constraints","description":"Enforce different policy thresholds based on environment (dev vs prod). Examples: prod requires Lambda memory >= 256MB, prod requires DynamoDB point-in-time recovery, prod requires S3 versioning enabled.","acceptance":["Policies differentiate between dev and prod environments","Prod Lambda memory minimum: 256MB","Prod Lambda timeout minimum: 30s","Prod DynamoDB: point-in-time recovery required","Prod S3: versioning required","Dev environments have relaxed constraints","Policy configuration is maintainable (not hardcoded per-environment)"],"status":"done","note":"Implemented across validate-claim-prod-requirements.yaml and validate-encryption-at-rest.yaml"}
{"type":"issue","epic":"EPIC-14","id":"ISSUE-14.6","title":"Document policy guardrails demo narrative","description":"Create a clear walkthrough showing how policies prevent dangerous configurations at multiple layers. Include examples of policy violations and how they surface to developers/operators.","acceptance":["Demo script or guide exists","Shows policy violation in ConfigHub (pre-apply)","Shows policy violation in Kyverno (admission)","Explains defense-in-depth value","Understandable without deep OPA knowledge"],"status":"done","note":"Created docs/demo-policy-guardrails.md with three demo scenarios and policy summary"}
{"type":"issue","epic":"EPIC-14","id":"ISSUE-14.7","title":"Design policy-to-risk-class mapping for EPIC-15 integration","description":"Document how EPIC-14 policies connect to EPIC-15 risk classes. Policies can enforce risk-based constraints: low-risk changes pass automatically, medium-risk changes require policy validation, high-risk changes require policy validation + human approval. This design doc bridges policy enforcement (EPIC-14) with agent-human boundaries (EPIC-15).","acceptance":["Design doc maps each policy to risk class(es) it enforces","Document explains how policy violations escalate to approval workflows","Clear boundary between policy enforcement (automated) and approval gates (human)","Design is reviewed before implementing EPIC-15 approval workflows","References ISSUE-15.1 (risk class definitions)"],"status":"done","note":"Created docs/design-policy-risk-class-mapping.md with risk classes, policy mapping, escalation model, and automation/human boundary"}

{"type":"epic","id":"EPIC-15","title":"Define agent–human change boundaries","intent":"Establish risk taxonomy and approval workflows for AI-assisted configuration changes. Defines how agents propose changes, how risk is classified, and when human approval is required. Focuses on the conceptual model and forward-looking agent considerations.","principles":["Agents propose, humans decide","Explicit risk classes","No silent privilege expansion"]}
{"type":"issue","epic":"EPIC-15","id":"ISSUE-15.1","title":"Define risk classes for configuration changes","description":"Classify configuration changes into low, medium, and high risk based on blast radius and reversibility.","acceptance":["Risk taxonomy documented","Each schema field mapped to a risk class","Taxonomy reviewed against real examples"],"depends_on":"ISSUE-14.7"}
{"type":"issue","epic":"EPIC-15","id":"ISSUE-15.2","title":"Implement agent proposal workflow","description":"Create a workflow where an agent proposes config changes as a patch or changeset without applying them.","acceptance":["Agent produces a valid proposed change","Proposal is reviewable by a human","Proposal cannot be applied directly"]}
{"type":"issue","epic":"EPIC-15","id":"ISSUE-15.3","title":"Require human approval for high-risk changes","description":"Introduce an explicit approval mechanism that gates application of high-risk changes.","acceptance":["High-risk changes blocked without approval","Low-risk changes can be applied without approval","Approval path documented"]}
{"type":"issue","epic":"EPIC-15","id":"ISSUE-15.13","title":"Document risks of approval fatigue and approval theater","description":"Capture the risk that human approvals become rubber-stamping as agent proposal volume increases, and outline mitigations.","acceptance":["Failure mode described with concrete examples","Mitigations proposed (risk aggregation, confidence thresholds, automation)","Document explicitly states when human approval alone is insufficient"]}
{"type":"issue","epic":"EPIC-15","id":"ISSUE-15.14","title":"Explore machine-verifiable invariants as complements to human approval","description":"Investigate how formal invariants, policies, or safety envelopes could allow agents to approve other agents within strict bounds.","acceptance":["List of candidate invariants documented","Examples show invariants preventing irreversible harm","Clear boundary defined between invariant enforcement and human judgment"]}
{"type":"issue","epic":"EPIC-15","id":"ISSUE-15.15","title":"Assess schema evolution pressure from intelligent agent behavior","description":"Analyze how increasingly capable agents may stress or bypass schema-first design, and how extension points or versioning could mitigate this.","acceptance":["Schema growth risks documented","Proposed extension/escape-hatch strategy outlined","Guidelines defined for promoting extensions to core schema"]}
{"type":"issue","epic":"EPIC-15","id":"ISSUE-15.17","title":"Explore feedback loops from runtime signals back into configuration authority","description":"Investigate how runtime observations (health, drift, learned behavior) could inform or update authoritative configuration without undermining control.","acceptance":["At least one feedback-loop pattern documented","Pattern preserves authority while incorporating runtime learning","Risks of runaway feedback explicitly called out"]}
{"type":"issue","epic":"EPIC-15","id":"ISSUE-15.18","title":"Define criteria for when systems or agents should bypass ConfigHub entirely","description":"Explicitly document scenarios where bypassing ConfigHub is acceptable or even desirable, to avoid accidental overreach of the authority plane.","acceptance":["Bypass criteria documented and justified","Bypass paths still include post-hoc reconciliation expectations","Document avoids framing ConfigHub as mandatory for all workflows"]}

{"type":"epic","id":"EPIC-16","title":"Developer authoring experience and OAM evaluation","intent":"Decide and validate what developers author directly, ensuring they never need to reason about AWS wiring or Crossplane internals. Evaluate whether OAM provides net value as an optional authoring layer without becoming a second source of truth.","principles":["Developers author intent only","Schema constrains possibility space","Fast feedback on invalid inputs","One-way compilation","No authority leakage","Optional adoption"]}
{"type":"issue","epic":"EPIC-16","id":"ISSUE-16.1","title":"Define a minimal OAM vocabulary for serverless apps","description":"Define a small set of OAM components and traits that express application intent and required capabilities.","acceptance":["<=8 traits defined","Traits map cleanly to platform schema fields","No AWS-specific concepts in OAM"]}
{"type":"issue","epic":"EPIC-16","id":"ISSUE-16.2","title":"Compile OAM into the canonical platform schema","description":"Implement a one-way compiler that translates OAM configs into the canonical developer-facing config (Claim or higher-level spec).","acceptance":["Compiler produces valid canonical config","OAM cannot bypass ConfigHub authority","OAM-originated changes follow same policy and approval flow"]}
{"type":"issue","epic":"EPIC-16","id":"ISSUE-16.3","title":"Decide developer authoring surface (Claim vs higher-level spec)","description":"Explicitly decide whether developers will author Crossplane Claims directly or a higher-level schema that compiles into Claims.","acceptance":["Decision documented with rationale","Chosen surface aligns with platform invariants","Non-chosen option documented as future consideration"]}
{"type":"issue","epic":"EPIC-16","id":"ISSUE-16.4","title":"Create canonical examples for developer-authored config","description":"Create at least two example configs (e.g., dev and prod) that represent the full developer-facing interface.","acceptance":["Examples live under a dedicated examples/ directory","Examples deploy successfully","Examples do not reference AWS-specific concepts"]}

{"type":"epic","id":"EPIC-17","title":"Production protection via ConfigHub gates","intent":"Implement concrete protections for stateful production resources using ConfigHub gates. Prevents accidental deletion or destruction of databases and other precious resources without explicit human approval.","principles":["Protect what matters most","Gates before destruction","Explicit approval for irreversible actions"]}
{"type":"issue","epic":"EPIC-17","id":"ISSUE-17.1","title":"Create production ConfigHub space for the demo","description":"Create a new ConfigHub space representing the production environment (e.g., messagewall-prod) that will eventually hold the fully-rendered Crossplane manifests for prod.","acceptance":["Production space exists in ConfigHub (name documented)","Space has environment=prod metadata/tag","A placeholder or initial baseline unit can be created in the space without applying to the actuator","README/docs describe how spaces map to environments"]}
{"type":"issue","epic":"EPIC-17","id":"ISSUE-17.2","title":"Identify database units in production and mark them as precious entities","description":"Define how DynamoDB (and any other stateful data stores) are represented as units in the production space and tag/label them as precious to enable consistent protections.","acceptance":["DynamoDB unit(s) for production are present (or planned) in the prod space","Units are labeled/tagged as precious=true (or equivalent convention)","Documentation defines which resource types qualify as 'database units' vs general infrastructure","A query (documented) can list all precious database units in prod"]}
{"type":"issue","epic":"EPIC-17","id":"ISSUE-17.3","title":"Enforce delete/destroy gates on all production database units","description":"Apply ConfigHub protecting controls so that all database units in the production space cannot be deleted or destroyed without explicit override/approval.","acceptance":["All prod database units have a delete gate enabled","All prod database units have a destroy gate enabled","Attempts to delete/destroy a gated unit fail with a clear message","Gates are applied consistently (automation or documented procedure)"]}
{"type":"issue","epic":"EPIC-17","id":"ISSUE-17.4","title":"Define and document the approval workflow to override delete/destroy gates","description":"Specify who can approve gated delete/destroy actions, what justification is required, how approvals are recorded, and how overrides are time/scoped-bounded.","acceptance":["Approval policy documented (roles, required approvers, audit expectations)","High-risk actions (delete/destroy in prod) require explicit human approval","Override scope is limited to a specific unit + action","Override is time-bounded or one-time-use (documented)","Process includes required justification and rollback/restore plan"]}
{"type":"issue","epic":"EPIC-17","id":"ISSUE-17.5","title":"Demonstrate gated destruction request and approved execution (safe drill)","description":"Run a non-destructive or sandboxed drill that shows the end-to-end flow: attempt delete/destroy -> gate blocks -> approval granted -> action succeeds (in a safe environment or using a dummy/proxy unit).","acceptance":["A scripted demo or runbook exists showing the full gate/approval flow","Gate block is observable and recorded","Approval step is explicit and auditable","Execution step succeeds only after approval","Post-action review notes include how to reconcile state and reassert protections"]}

{"type":"epic","id":"EPIC-18","title":"Tiered authority across environments","intent":"Design and document how configuration authority and gates vary by environment tier. Sandbox environments need fast iteration; production needs strict protection. Define the model that enables both without compromising either.","principles":["Strict where it matters","Fast where it's safe","Clear tier boundaries"]}
{"type":"issue","epic":"EPIC-18","id":"ISSUE-18.1","title":"Document limits of centralized configuration authority in high-churn environments","description":"Capture where a single authoritative configuration plane may break down under rapid experimentation, ephemeral environments, or high agent-driven change velocity.","acceptance":["ADR or doc exists describing failure modes of over-centralized authority","Examples include ephemeral stacks, throwaway environments, and agent-local loops","Document explicitly states which scenarios ConfigHub should not try to control tightly"]}
{"type":"issue","epic":"EPIC-18","id":"ISSUE-18.2","title":"Define tiered authority model across environments (sandbox vs production)","description":"Design and document a tiered authority model where sandbox and pre-production environments have relaxed gates while production remains strictly protected.","acceptance":["Authority tiers defined (e.g., sandbox, pre-prod, prod)","Each tier documents expected gate posture and approval requirements","Model supports multi-tenant use without weakening production guarantees"]}
{"type":"issue","epic":"EPIC-18","id":"ISSUE-18.3","title":"Explore time-scoped or provisional configuration for sandbox environments","description":"Investigate mechanisms for time-bound or auto-expiring configuration in sandbox environments to support fast experimentation without long-lived drift.","acceptance":["At least one proposed design for time-scoped config documented","Design includes automatic expiration or promotion semantics","Design explicitly avoids leaking provisional config into prod"]}
{"type":"issue","epic":"EPIC-18","id":"ISSUE-18.4","title":"Define how agents can safely operate with relaxed gates in non-prod","description":"Specify what additional freedoms agents may have in sandbox or pre-production spaces while maintaining observability and traceability.","acceptance":["Agent capabilities differ by environment tier","Sandbox allows autonomous apply within bounded schema","All agent actions remain auditable in ConfigHub"]}
{"type":"issue","epic":"EPIC-18","id":"ISSUE-18.5","title":"Define ConfigHub's value proposition in sandbox and pre-production environments","description":"Articulate why developers and agents should still use ConfigHub when gates are relaxed, focusing on visibility, history, and coordination rather than restriction.","acceptance":["Clear value statement for non-prod usage written","Examples show benefits beyond enforcement (diffs, bulk ops, traceability)","Doc explicitly contrasts sandbox vs production value"]}

{"type":"epic","id":"EPIC-19","title":"ConfigHub multi-tenancy design","intent":"Design how ConfigHub organizes configuration across environments, teams, and tenants. Clarify the relationship between ConfigHub spaces and Kubernetes namespaces, and establish conventions for multi-tenant operation.","principles":["Clear organizational model","Predictable mapping","Scalable conventions"]}
{"type":"issue","epic":"EPIC-19","id":"ISSUE-19.1","title":"Analyze ConfigHub spaces to Kubernetes namespaces mapping","description":"Investigate whether there should be a 1:1 mapping between ConfigHub spaces and Kubernetes namespaces, or some other organizational model. Document the options and trade-offs.","acceptance":["Options for space-to-namespace mapping documented","Trade-offs of each approach enumerated","Current demo setup analyzed against each option","Recommendation made with rationale"]}
{"type":"issue","epic":"EPIC-19","id":"ISSUE-19.2","title":"Design multi-tenant organization model for ConfigHub","description":"Define how multiple teams, applications, or tenants would be organized within ConfigHub. Consider isolation, access control, and operational boundaries.","acceptance":["Multi-tenant model documented","Isolation boundaries defined","Access control patterns outlined","Model validated against 2-3 hypothetical tenant scenarios"]}
{"type":"issue","epic":"EPIC-19","id":"ISSUE-19.3","title":"Document space and namespace conventions for the demo","description":"Establish and document the naming conventions and organizational patterns for ConfigHub spaces and Kubernetes namespaces in this demo project.","acceptance":["Naming conventions documented","Conventions applied to existing spaces","README or docs explain the organizational model","Conventions are consistent with multi-tenant design from ISSUE-19.2"]}
